@layer components {
  /* Navigation panel: hidden off-screen right, slides in on .nav-open */
  .navigation-multilevel {
    opacity: 0;
    transform: translateX(100%);
    transition: opacity .4s ease, transform .4s ease;
  }
  .nav-open .navigation-multilevel {
    opacity: 1;
    transform: translateX(0);
  }

  /* Flex layout for inner structure */
  .navigation-menu {
    flex: 1 1 auto;
    min-height: 0;
    display: flex;
  }
  .navigation-viewport {
    position: relative;
    flex: 1 1 auto;
    min-height: 0;
    width: 100%;
  }

  /* Panels: hidden by default, absolute-positioned */
  .menu-panel {
    position: absolute;
    inset: 0;
    width: 100%;
    height: 100%;
    opacity: 0;
    visibility: hidden;
    pointer-events: none;
    transition: opacity .25s ease, visibility 0s ease .25s;
  }
  .menu-panel.is-active {
    opacity: 1;
    visibility: visible;
    pointer-events: auto;
    transition: opacity .25s ease, visibility 0s ease 0s;
  }

  /* Menu list layout */
  .menu-panel .menu-list {
    display: flex;
    flex-direction: column;
    align-items: flex-start;
    gap: .25rem;
  }

  /* Back button */
  .submenu-back {
    @apply underline-offset-3 underline cursor-pointer;
    margin-bottom: 1rem;
    opacity: .85;
    transition: opacity .2s ease;
  }
  @media (any-hover: hover) {
    .submenu-back:hover { opacity: 1; }
  }

  /* Submenu icon */
  .submenu-icon svg path {
    @apply fill-white;
  }

  /* Nav link hover underline */
  .navigation-multilevel .nav-link {
    transition: color .3s ease, opacity .3s ease, transform .3s ease;
  }
  .navigation-multilevel .nav-link::after {
    background-color: white;
    bottom: 0;
    content: '';
    left: 0;
    height: 1px;
    position: absolute;
    right: 0;
    transform: translateX(-101%);
    transition: transform .3s ease;
  }
  @media (any-hover: hover) {
    .navigation-multilevel .nav-link:hover::after {
      transform: translateX(0);
    }
  }

  /* Additional links */
  .navigation-additional .text-link {
    @apply text-[20px] leading-[1.4];
  }

  /* Staggered entrance: menu items start hidden, slide in when nav opens */
  .menu-panel .menu-list > * {
    opacity: 0;
    transform: translateX(2.5rem);
  }
  .navigation-additional > *,
  .navigation-social > * {
    opacity: 0;
    transform: translateX(2.5rem);
  }

  .nav-open .menu-panel.is-active .menu-list > *,
  .nav-open .navigation-additional > *,
  .nav-open .navigation-social > * {
    opacity: 1;
    transform: translateX(0);
  }

  /* Staggered delays for menu items */
  .nav-open .menu-panel.is-active .menu-list > * {
    transition: opacity .25s ease, transform .35s ease !important;
  }
  .nav-open .menu-panel.is-active .menu-list > *:nth-child(1) { transition-delay: .16s !important; }
  .nav-open .menu-panel.is-active .menu-list > *:nth-child(2) { transition-delay: .20s !important; }
  .nav-open .menu-panel.is-active .menu-list > *:nth-child(3) { transition-delay: .24s !important; }
  .nav-open .menu-panel.is-active .menu-list > *:nth-child(4) { transition-delay: .28s !important; }
  .nav-open .menu-panel.is-active .menu-list > *:nth-child(5) { transition-delay: .32s !important; }
  .nav-open .menu-panel.is-active .menu-list > *:nth-child(6) { transition-delay: .36s !important; }
  .nav-open .menu-panel.is-active .menu-list > *:nth-child(7) { transition-delay: .40s !important; }
  .nav-open .menu-panel.is-active .menu-list > *:nth-child(8) { transition-delay: .44s !important; }
  .nav-open .menu-panel.is-active .menu-list > *:nth-child(9) { transition-delay: .48s !important; }
  .nav-open .menu-panel.is-active .menu-list > *:nth-child(10) { transition-delay: .52s !important; }

  /* Additional links staggered */
  .nav-open .navigation-additional > * {
    transition: opacity .25s ease, transform .35s ease !important;
  }
  .nav-open .navigation-additional > *:nth-child(1) { transition-delay: .60s !important; }
  .nav-open .navigation-additional > *:nth-child(2) { transition-delay: .65s !important; }

  /* Social links staggered */
  .nav-open .navigation-social > * {
    transition: opacity .25s ease, transform .35s ease !important;
  }
  .nav-open .navigation-social > *:nth-child(1) { transition-delay: .80s !important; }
  .nav-open .navigation-social > *:nth-child(2) { transition-delay: .85s !important; }
  .nav-open .navigation-social > *:nth-child(3) { transition-delay: .90s !important; }

  /* Instant mode: disable transitions during panel reset */
  .navigation-viewport.is-instant * {
    transition-duration: 0s !important;
    transition-delay: 0s !important;
  }
}
