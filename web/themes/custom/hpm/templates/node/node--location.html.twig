{{ attach_library('hpm/fade-ins') }}
{{ attach_library('hpm/slider-gallery') }}
<article{{ attributes.addClass('node', 'node--location') }}>
  {{ title_prefix }}
  {{ title_suffix }}

  {# Stage: meta + headline + back link + image #}
  <section class="location-project-details stage-section">
    <div class="section-container grid grid-cols-12 gap-y-7
                sm:gap-x-7">
      <div class="flex flex-col items-start gap-3
                  col-span-12
                  sm:col-span-10 sm:col-start-2
                  md:py-4
                  lg:py-6
                  xl:py-9">
        <h1 class="info text-hpm-red meta-line--red meta-line--medium">
          {{ 'Standort'|t }}
        </h1>
        <h2 class="h1">
          {{ node.field_city.value }}
        </h2>
      </div>

      <div class="col-span-12 mt-2
                  sm:col-span-10 sm:col-start-2 sm:mt-3
                  md:col-span-12 md:col-start-1">
        <a class="text-link text-link--back font-case leading-[1.2] text-hpm-darkred"
           href="/standorte"
           title="Zur Standortübersicht">
          <span class="text-link__text copy">Zur Übersicht</span>
          <span class="link-icon rotate-180">
            {% include '@hpm/images/vectors/button-arrow.svg.twig' %}
          </span>
        </a>
      </div>

      {% if content.field_location_image|render|trim %}
        <div class="col-span-12">
          <div class="image-container js-zoom-image">
            {{ content.field_location_image }}
          </div>
        </div>
      {% endif %}
    </div>
  </section>

  {# Content: description text + contact sidebar #}
  <section class="content-section">
    <div class="section-container grid grid-cols-1 gap-7
                sm:grid-cols-12">
      {# Text #}
      <div class="col-span-12
                  sm:col-span-10 sm:col-start-2
                  md:col-span-6 md:col-start-2
                  lg:col-span-6 lg:col-start-2
                  xl:col-span-5 xl:col-start-2">
        {% if content.body|render|trim %}
          <div class="formatted">
            {{ content.body }}
          </div>
        {% endif %}
      </div>

      {# Contact sidebar #}
      <div class="col-span-12
                  sm:col-span-10 sm:col-start-2
                  md:col-span-4 md:col-start-9
                  lg:col-span-4 lg:col-start-9">
        <div class="flex flex-col items-start gap-7">
          <div class="flex flex-col items-start gap-2">
            <h4 class="info text-hpm-red">Kontakt</h4>
            <div class="formatted">
              {% if node.field_address.value %}
                {{ node.field_address.value|raw }}
              {% endif %}
              {% if node.field_phone.value %}
                <br>{{ node.field_phone.value }}
              {% endif %}
              {% if node.field_email.value %}
                <br><a href="mailto:{{ node.field_email.value }}">{{ node.field_email.value }}</a>
              {% endif %}
            </div>
          </div>
          {% if node.field_maps_link.0.url %}
            <a class="button"
               href="{{ node.field_maps_link.0.url }}"
               title="Standort {{ node.field_city.value }}"
               target="_blank">
              <span>Google Maps</span>
              <span class="button-icon">
                {% include '@hpm/images/vectors/button-arrow.svg.twig' %}
              </span>
            </a>
          {% endif %}
        </div>
      </div>
    </div>
  </section>
  <div id="content"> </div>

  {# Gallery #}
  {% if content.field_gallery|render|trim %}
    <div class="content-section">
      <div class="gallery-slider js-gallery-slider">
        {{ content.field_gallery }}
      </div>
    </div>
  {% endif %}

  {# Team Members (people from this location) #}
  {% if content.field_team_members|render|trim %}
    <div class="content-section" data-theme="beige">
      <div class="section-container">
        <h2 class="h3 mb-8">{{ 'Unser Team'|t }}</h2>
        {{ content.field_team_members }}
      </div>
    </div>
  {% endif %}

  {# Remaining paragraphs #}
  {% if content.field_paragraphs|render|trim %}
    {{ content.field_paragraphs }}
  {% endif %}
</article>
